<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distribution Simulation</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
  /* styles.css */

  * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f4f4f9;
            color: #333;
            line-height: 1.6;
        }

        header {
            background-color: #007bff;
            color: #fff;
            padding: 1rem;
            text-align: center;
        }

        header h1 {
            font-size: 2rem;
        }

        nav {
            background-color: #333;
            padding: 10px;
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        nav ul li {
            display: inline;
        }

        nav a {
            display: inline-block;
            color: white;
            background-color: #007bff;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        nav a:hover {
            background-color: #0056b3;
        }

        main {
            width: 90%;
            max-width: 1200px;
            margin: 2rem auto;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        section {
            background-color: #fff;
            padding: 1.5rem;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        section h2 {
            font-size: 1.75rem;
            margin-bottom: 1rem;
            color: #333;
        }

        section h3 {
            font-size: 1.5rem;
            margin-top: 1rem;
            color: #444;
        }

        section p,
        section pre {
            margin: 1rem 0;
            font-size: 1rem;
        }

        #controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        #controls label {
            font-weight: bold;
            color: #333;
        }

        #controls input,
        #controls button {
            padding: 0.5rem;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        #controls button {
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #controls button:hover {
            background-color: #0056b3;
        }

        canvas {
            max-width: 100%;
            margin-top: 1rem;
        }

        #chartContainer {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            justify-content: space-around;
        }

        #emChart,
        #trajectoryChart,
        #distributionChart {
            width: 100%;
            max-width: 500px;
        }

        #regressionOutput {
            margin-top: 1rem;
            font-size: 1.1rem;
            color: #007bff;
        }

        footer {
            background-color: #333;
            color: #fff;
            padding: 1rem;
            text-align: center;
            margin-top: 2rem;
        }

        footer p {
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
        </ul>
    </nav>
    <h1>Simulation of Distribution with Mean and Variance with given subsets</h1>
    
    <div id="controls">
        <label for="m">Number of Subsets (m):</label>
        <input type="number" id="m" value="5" step="1" min="1">

        <label for="n">Number of Samples per Subset (n):</label>
        <input type="number" id="n" value="100" step="1" min="1">

        <label for="intervals">Number of Intervals:</label>
        <input type="number" id="intervals" value="10" step="1" min="1">

        <button onclick="simulate()">Simulate</button>
    </div>

    <p>
        <strong>Mean of Means:</strong> <span id="meanOfMeans">N/A</span> <br>
        <strong>Variance of Means:</strong> <span id="varianceOfMeans">N/A</span>
    </p>

    <section id="sample-generation">
        <div id="chartContainer">
            <canvas id="chartCanvas"></canvas>
        </div>
    </section>

    <section id="theoretical-vs-empirical">
        <h2>Theoretical Mean and Variance of the Uniform Distribution [0, 1]</h2>
        
        <p>The uniform distribution <strong>U(a, b)</strong> describes a random variable that is equally likely to take any value in the interval [a, b]. This section discusses the theoretical mean and variance for the uniform distribution <strong>U(0, 1)</strong> and compares them with empirical values calculated from simulations.</p>
    
        <h3>Theoretical Mean and Variance</h3>
        <p>For a uniform distribution <strong>U(a, b)</strong>, the mean and variance are given by:</p>
        <ul>
            <li><strong>Mean:</strong> \( \mu = \frac{a + b}{2} \)</li>
            <li><strong>Variance:</strong> \( \sigma^2 = \frac{(b - a)^2}{12} \)</li>
        </ul>
        <p>For the interval [0, 1], where \( a = 0 \) and \( b = 1 \):</p>
        <pre><code>Mean (μ) = (0 + 1) / 2 = 0.5</code></pre>
        <pre><code>Variance (σ²) = (1 - 0)² / 12 = 1 / 12 ≈ 0.0833</code></pre>
    
        <h3>Observed Mean and Variance from Simulated Data</h3>
        <p>In our simulation, we generated random samples from the uniform distribution [0, 1]. For each group of samples, we calculated:</p>
        <ul>
            <li><strong>Sample Mean:</strong> \( \bar{x} = \frac{1}{n} \sum_{i=1}^{n} x_i \)</li>
            <li><strong>Sample Variance:</strong> \( s^2 = \frac{1}{n} \sum_{i=1}^{n} (x_i - \bar{x})^2 \)</li>
        </ul>
    
        <h3>Relationship Between Theoretical and Empirical Values</h3>
        <p>As the number of samples and sample groups increases, the observed sample mean and variance converge to the theoretical values. This is supported by:</p>
        <ul>
            <li><strong>Law of Large Numbers (LLN):</strong> Ensures the sample mean approaches the population mean.</li>
            <li><strong>Central Limit Theorem (CLT):</strong> Explains the distribution of the sample mean for large sample sizes.</li>
        </ul>
    
        <h4>Key Observations:</h4>
        <ul>
            <li>The sample mean approaches 0.5 with increasing sample size.</li>
            <li>The sample variance converges to \( \frac{1}{12} ≈ 0.0833 \).</li>
        </ul>
    
        <h3>Example Simulation</h3>
        <p>We ran a simulation with the following parameters:</p>
        <ul>
            <li>Number of subgroups: \( m = 100 \)</li>
            <li>Number of samples per subgroup: \( n = 50 \)</li>
        </ul>
        <p>For this simulation, the observed mean and variance were:</p>
        <pre><code>Observed Mean: 0.497
    Observed Variance: 0.0829</code></pre>
        <p>These values are very close to the theoretical values, demonstrating convergence.</p>
    
        <h3>Graphical Representation</h3>
        <p>The histogram below shows the distribution of sample means across all subgroups, overlaid with the theoretical mean (0.5) and variance (\( 1/12 \)):</p>
        <img src="histogram_example.png" alt="Histogram of Sample Means with Theoretical Mean and Variance">
    </section>

    <footer>
        <p>&copy;2024 Fabio Figara - Statistics Blog - Homework 6</p>
    </footer>

    <script>
        // JavaScript functions here (simulate and drawChart)
        function simulate() {
            const m = parseInt(document.getElementById('m').value);  // Number of subsets
            const n = parseInt(document.getElementById('n').value);  // Number of samples per subset
            const intervals = parseInt(document.getElementById('intervals').value);  // Not used in the function, but preserved

            const means = [];
            const variances = [];
            const allMeans = [];
            const allVariances = [];

            const theoreticalMean = 0.5;
            const theoreticalVariance = 1 / 12;

            for (let i = 0; i < m; i++) {
                const randomNumbers = Array.from({ length: n }, () => Math.random());
                const mean = randomNumbers.reduce((sum, val) => sum + val, 0) / n;
                const variance = randomNumbers.reduce((sum, val) => sum + (val - mean) ** 2, 0) / n;

                means.push(mean);
                variances.push(variance);

                allMeans.push(parseFloat(mean));
                allVariances.push(parseFloat(variance));
            }

            const meanOfMeans = (allMeans.reduce((sum, val) => sum + val, 0) / m).toFixed(4);
            const varianceOfMeans = (allVariances.reduce((sum, val) => sum + val, 0) / m).toFixed(4);

            document.getElementById('meanOfMeans').textContent = meanOfMeans;
            document.getElementById('varianceOfMeans').textContent = varianceOfMeans;

            drawChart(means, variances, theoreticalMean, theoreticalVariance);
        }

        function drawChart(means, variances, theoreticalMean, theoreticalVariance) {
            const ctx = document.getElementById('chartCanvas').getContext('2d');

            if (window.myChart) {
                window.myChart.destroy();
            }

            window.myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: means.map((_, i) => `Subset ${i + 1}`),
                    datasets: [
                        {
                            label: 'Empirical Mean',
                            data: means,
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Empirical Variance',
                            data: variances,
                            backgroundColor: 'rgba(75, 192, 192, 0.5)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Theoretical Mean',
                            data: Array(means.length).fill(theoreticalMean),
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            type: 'line'
                        },
                        {
                            label: 'Theoretical Variance',
                            data: Array(variances.length).fill(theoreticalVariance),
                            borderColor: 'rgba(255, 159, 64, 1)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            type: 'line'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true },
                        x: { title: { display: true, text: 'Subset Index' } }
                    }
                }
            });
        }
    </script>
</body>
</html>

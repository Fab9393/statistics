<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distribution and Simulation with Mean and Variance</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* styles.css */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f4f4f9;
            color: #333;
            line-height: 1.6;
        }

        header {
            background-color: #007bff;
            color: #fff;
            padding: 1rem;
            text-align: center;
        }

        header h1 {
            font-size: 2rem;
        }

        nav {
            background-color: #333;
            padding: 10px;
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        nav ul li {
            display: inline;
        }

        nav a {
            display: inline-block;
            color: white;
            background-color: #007bff;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        nav a:hover {
            background-color: #0056b3;
        }

        main {
            width: 90%;
            max-width: 1200px;
            margin: 2rem auto;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        section {
            background-color: #fff;
            padding: 1.5rem;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        section h2 {
            font-size: 1.75rem;
            margin-bottom: 1rem;
            color: #333;
        }

        section h3 {
            font-size: 1.5rem;
            margin-top: 1rem;
            color: #444;
        }

        section p,
        section pre {
            margin: 1rem 0;
            font-size: 1rem;
        }

        #controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        #controls label {
            font-weight: bold;
            color: #333;
        }

        #controls input,
        #controls button {
            padding: 0.5rem;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        #controls button {
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #controls button:hover {
            background-color: #0056b3;
        }

        canvas {
            max-width: 100%;
            margin-top: 1rem;
        }

        #chartContainer {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            justify-content: space-around;
        }

        #emChart,
        #trajectoryChart,
        #distributionChart {
            width: 100%;
            max-width: 500px;
        }

        #regressionOutput {
            margin-top: 1rem;
            font-size: 1.1rem;
            color: #007bff;
        }

        footer {
            background-color: #333;
            color: #fff;
            padding: 1rem;
            text-align: center;
            margin-top: 2rem;
        }

        footer p {
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>Simulation of Distribution with Mean and Variance</h1>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
        </ul>
    </nav>

    <main>
        <section id="sample-generation">
            <h2>Random Sample Generation</h2>
            <label for="sampleSize">Number of Samples:</label>
            <input type="number" id="sampleSize" value="100" step="1" min="1">
            <button id="generateBtn">Generate Samples</button>
        </section>
    </main>

    <section id="sample-generation">
        <div id="chartContainer">
            <canvas id="distributionChart"></canvas>
        </div>
    </section>

    <section id="sample-generation">
        <div id="chartContainer">
            <canvas id="meanChart"></canvas>
        </div>
    </section>

    <section id="sample-generation">
        <div id="chartContainer">
            <canvas id="varianceChart"></canvas>
        </div>
    </section>

    <section id="fundamental-theorem">
        <h2>The Fundamental Theorem of Calculus and Its Relationship with Density Functions and Cumulative Distribution Functions</h2>
        
        <p>The Fundamental Theorem of Calculus (FTC) connects the concepts of differentiation and integration. In probability theory, the FTC establishes an important link between probability density functions (PDFs) and cumulative distribution functions (CDFs). This section explores that relationship.</p>
        
        <h3>The Fundamental Theorem of Calculus (FTC)</h3>
        <p>The FTC consists of two parts:</p>
        <ul>
            <li><strong>First Part (FTC1):</strong> Relates the integral of a function to its antiderivative.</li>
            <li><strong>Second Part (FTC2):</strong> States that the derivative of the integral of a function is the original function.</li>
        </ul>
        
        <h3>Relationship with Density Functions and Cumulative Distribution Functions</h3>
        <p>In probability theory, the cumulative distribution function (CDF) of a continuous random variable <strong>X</strong> is defined as:</p>
        <pre><code>CDF(x) = ∫(from -∞ to x) PDF(t) dt</code></pre>
        <p>where <strong>PDF(t)</strong> is the probability density function of the variable.</p>
        
        <h3>Applying the FTC to Probability Distributions</h3>
        <p>Using the FTC, we can establish the following relationships:</p>
        <ul>
            <li><strong>From PDF to CDF:</strong> The CDF is the integral of the PDF:</li>
            <pre><code>CDF(x) = ∫(from -∞ to x) PDF(t) dt</code></pre>
            <li><strong>From CDF to PDF:</strong> The PDF is the derivative of the CDF:</li>
            <pre><code>PDF(x) = d/dx (CDF(x))</code></pre>
        </ul>
    
        <h3>Example: Standard Normal Distribution</h3>
        <p>Consider the standard normal distribution, where the PDF is:</p>
        <pre><code>PDF(x) = (1 / √(2π)) * exp(-x² / 2)</code></pre>
        <p>The CDF of the standard normal distribution does not have a closed-form expression, but its derivative gives the original PDF.</p>
        
        <h3>Generating Realizations from a Discrete Univariate Distribution</h3>
        <p>This exercise covers:</p>
        <ul>
            <li>Generating realizations from a discrete univariate probability distribution with arbitrary probabilities.</li>
            <li>Graphically showing the convergence of the empirical distribution to the theoretical distribution as sample size increases.</li>
            <li>Calculating the mean and variance using recursive algorithms and comparing them with theoretical values.</li>
        </ul>
        
        <h4>Defining the Arbitrary Discrete Distribution</h4>
        <p>Consider a discrete random variable <strong>X</strong> with values:</p>
        <pre><code>1, 2, 3, 4, 5</code></pre>
        <p>with corresponding probabilities:</p>
        <pre><code>0.1, 0.2, 0.4, 0.2, 0.1</code></pre>
    
        <h4>Theoretical Mean and Variance</h4>
        <p>The theoretical mean and variance for this distribution are:</p>
        <pre><code>Mean = 3, Variance = 2</code></pre>
        
        <h4>Generating Random Samples</h4>
        <p>Using the inverse transform sampling method, we generate random samples from the defined discrete distribution.</p>
        <ul>
            <li>Compute the cumulative distribution function (CDF).</li>
            <li>Generate a uniform random number in [0, 1].</li>
            <li>Find the smallest index <strong>i</strong> such that <strong>CDF(i) ≥ random number</strong>.</li>
            <li>Assign this <strong>i</strong> as the generated value.</li>
        </ul>
    
        <h4>Empirical vs. Theoretical Distribution</h4>
        <p>As we generate samples of increasing size, we will graphically show how the empirical distribution converges to the theoretical distribution.</p>
    </section>
    

    <section id="code-fragments">
        <h3>Code Fragments</h3>
        <p>This section provides JavaScript functions for generating random samples and calculating progressive mean and variance.</p>

        <h4>Sample Generation Function</h4>
        <pre><code>function generateRandomSample(sampleCount) {
        const samples = [];
        for (let i = 0; i < sampleCount; i++) {
            const randomNum = Math.random();
            let sampleValue;
            for (let j = 0; j < cumulativeDistribution.length; j++) {
                if (randomNum < cumulativeDistribution[j]) {
                    sampleValue = distributionValues[j];
                    break;
                }
            }
            samples.push(sampleValue);
        }
        return samples;
        }</code></pre>

                <h4>Mean and Variance Calculation Function</h4>
                <pre><code>function calculateMeanVariance(data) {
        let n = 0, mean = 0, sumM2 = 0;
        const meanProgressive = [], varianceProgressive = [];

        data.forEach(value => {
            n++;
            const delta = value - mean;
            mean += delta / n;
            const delta2 = value - mean;
            sumM2 += delta * delta2;
            meanProgressive.push(mean);
            varianceProgressive.push(sumM2 / n);
        });

        return { meanProgressive, varianceProgressive };
        }</code></pre>
    </section>

    <footer>
        <p>&copy;2024 Fabio Figara - Statistics Blog - Homework 6</p>
    </footer>

    <script>
        const distributionValues = [1, 2, 3, 4, 5];
        const theoreticalProbabilities = [0.1, 0.2, 0.4, 0.2, 0.1];

        const cumulativeDistribution = [];
        theoreticalProbabilities.reduce((acc, curr, idx) => {
            cumulativeDistribution[idx] = acc + curr;
            return cumulativeDistribution[idx];
        }, 0);

        function generateRandomSample(sampleCount) {
            const samples = [];
            for (let i = 0; i < sampleCount; i++) {
                const randomNum = Math.random();
                let sampleValue;
                for (let j = 0; j < cumulativeDistribution.length; j++) {
                    if (randomNum < cumulativeDistribution[j]) {
                        sampleValue = distributionValues[j];
                        break;
                    }
                }
                samples.push(sampleValue);
            }
            return samples;
        }

        function calculateMeanVariance(data) {
            let n = 0, mean = 0, sumM2 = 0;
            const meanProgressive = [], varianceProgressive = [];

            data.forEach(value => {
                n++;
                const delta = value - mean;
                mean += delta / n;
                const delta2 = value - mean;
                sumM2 += delta * delta2;
                meanProgressive.push(mean);
                varianceProgressive.push(sumM2 / n);
            });

            return { meanProgressive, varianceProgressive };
        }

        let distributionChart, meanChart, varianceChart;

        function updateCharts(sampleCount) {
            const samples = generateRandomSample(sampleCount);
            const empiricalProbabilities = distributionValues.map(val => samples.filter(c => c === val).length / sampleCount);

            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { title: { display: true, text: '' } },
                    y: { title: { display: true, text: '' }, beginAtZero: true }
                },
                plugins: {
                    legend: { position: 'top' }
                }
            };

            if (distributionChart) distributionChart.destroy();
            const distributionCtx = document.getElementById('distributionChart').getContext('2d');
            distributionChart = new Chart(distributionCtx, {
                type: 'bar',
                data: {
                    labels: distributionValues,
                    datasets: [
                        {
                            label: 'Theoretical Probabilities',
                            data: theoreticalProbabilities,
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Empirical Probabilities',
                            data: empiricalProbabilities,
                            backgroundColor: 'rgba(135, 206, 250, 0.5)',
                            borderColor: 'rgba(135, 206, 250, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    scales: {
                        x: { title: { display: true, text: 'Value' } },
                        y: { title: { display: true, text: 'Probability' }, beginAtZero: true, max: 0.5 }
                    }
                }
            });

            const { meanProgressive, varianceProgressive } = calculateMeanVariance(samples);
            const sampleLabels = Array.from({ length: sampleCount }, (_, i) => i + 1);

            if (meanChart) meanChart.destroy();
            const meanCtx = document.getElementById('meanChart').getContext('2d');
            meanChart = new Chart(meanCtx, {
                type: 'line',
                data: {
                    labels: sampleLabels,
                    datasets: [
                        {
                            label: 'Empirical Mean',
                            data: meanProgressive,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            fill: false,
                            pointRadius: 0
                        },
                        {
                            label: 'Theoretical Mean',
                            data: Array(sampleCount).fill(3),
                            borderColor: 'rgba(153, 102, 255, 1)',
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    scales: {
                        x: { title: { display: true, text: 'Sample Count' } },
                        y: { title: { display: true, text: 'Mean' }, beginAtZero: false }
                    }
                }
            });

            if (varianceChart) varianceChart.destroy();
            const varianceCtx = document.getElementById('varianceChart').getContext('2d');
            varianceChart = new Chart(varianceCtx, {
                type: 'line',
                data: {
                    labels: sampleLabels,
                    datasets: [
                        {
                            label: 'Empirical Variance',
                            data: varianceProgressive,
                            borderColor: 'rgba(255, 159, 64, 1)',
                            fill: false,
                            pointRadius: 0
                        },
                        {
                            label: 'Theoretical Variance',
                            data: Array(sampleCount).fill(2),
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    ...chartOptions,
                    scales: {
                        x: { title: { display: true, text: 'Sample Count' } },
                        y: { title: { display: true, text: 'Variance' }, beginAtZero: true, max: 3 }
                    }
                }
            });
        }

        document.getElementById('generateBtn').addEventListener('click', () => {
            const sampleSize = parseInt(document.getElementById('sampleSize').value);
            updateCharts(sampleSize);
        });

        updateCharts(100);
    </script>
</body>
</html>

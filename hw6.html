<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distribution and Simulation with Mean and Variance</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* General styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }

        header {
            background-color: #3367d6;
            color: #fff;
            padding: 1rem;
            text-align: center;
        }

        header h1 {
            font-size: 2rem;
        }

        main {
            width: 90%;
            max-width: 1200px;
            margin: 2rem auto;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        section {
            background-color: #fff;
            padding: 1.5rem;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        h2, h3 {
            color: #333;
            margin-bottom: 1rem;
        }

        p, pre {
            margin: 1rem 0;
            font-size: 1rem;
        }

        #controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        #controls label {
            font-weight: bold;
        }

        #controls input,
        #controls button {
            padding: 0.5rem;
            font-size: 1rem;
            border-radius: 5px;
        }

        #controls button {
            background-color: #3367d6;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #controls button:hover {
            background-color: #2851a3;
        }

        canvas {
            max-width: 100%;
            margin-top: 1rem;
        }

        #chartContainer {
            display: flex;
            gap: 2rem;
            justify-content: space-around;
        }

        #theoreticalMeanVariance {
            margin-top: 1.5rem;
            color: #3367d6;
        }

        footer {
            background-color: #333;
            color: #fff;
            padding: 1rem;
            text-align: center;
            margin-top: 2rem;
        }

        /* Code styling */
        pre {
            background-color: #282c34;
            color: #abb2bf;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        code {
            background-color: #f4f4f4;
            color: #c0392b;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <header>
        <h1>Simulation of Distribution with Mean and Variance</h1>
    </header>

    <main>
        <section id="sample-generation">
            <h2>Generate Random Samples</h2>
            <div id="controls">
                <label for="sampleSize">Number of Samples:</label>
                <input type="number" id="sampleSize" value="100" min="1">
                <button id="generateBtn">Generate Samples</button>
            </div>

            <div id="chartContainer">
                <canvas id="distributionChart"></canvas>
                <canvas id="meanChart"></canvas>
                <canvas id="varianceChart"></canvas>
            </div>

            <div id="chartContainer">
                <canvas id="meanChart"></canvas>
            </div>

            <div id="chartContainer">
                <canvas id="varianceChart"></canvas>
            </div>
        </section>

        <section id="code-fragments">
            <h3>Code Snippets</h3>
            <p>This section provides JavaScript functions for generating random samples and calculating progressive mean and variance.</p>

            <h4>Sample Generation Function</h4>
            <pre><code>function generateRandomSample(sampleCount) {
    const samples = [];
    for (let i = 0; i < sampleCount; i++) {
        const randomNum = Math.random();
        let sampleValue;
        for (let j = 0; j < cumulativeDistribution.length; j++) {
            if (randomNum < cumulativeDistribution[j]) {
                sampleValue = distributionValues[j];
                break;
            }
        }
        samples.push(sampleValue);
    }
    return samples;
}</code></pre>

            <h4>Mean and Variance Calculation Function</h4>
            <pre><code>function calculateMeanVariance(data) {
    let n = 0, mean = 0, sumM2 = 0;
    const meanProgressive = [], varianceProgressive = [];

    data.forEach(value => {
        n++;
        const delta = value - mean;
        mean += delta / n;
        const delta2 = value - mean;
        sumM2 += delta * delta2;
        meanProgressive.push(mean);
        varianceProgressive.push(sumM2 / n);
    });

    return { meanProgressive, varianceProgressive };
}</code></pre>
        </section>
    </main>

    <footer>
        <p>&copy;2024 Distribution and Simulation</p>
    </footer>

    <script>
        const distributionValues = [1, 2, 3, 4, 5];
        const theoreticalProbabilities = [0.1, 0.2, 0.4, 0.2, 0.1];
        const cumulativeDistribution = theoreticalProbabilities.reduce((acc, value) => {
            acc.push((acc.slice(-1)[0] || 0) + value);
            return acc;
        }, []);

        function generateRandomSample(sampleCount) {
            const samples = [];
            for (let i = 0; i < sampleCount; i++) {
                const randomNum = Math.random();
                let sampleValue;
                for (let j = 0; j < cumulativeDistribution.length; j++) {
                    if (randomNum < cumulativeDistribution[j]) {
                        sampleValue = distributionValues[j];
                        break;
                    }
                }
                samples.push(sampleValue);
            }
            return samples;
        }

        function calculateMeanVariance(data) {
            let n = 0, mean = 0, sumM2 = 0;
            const meanProgressive = [], varianceProgressive = [];

            data.forEach(value => {
                n++;
                const delta = value - mean;
                mean += delta / n;
                const delta2 = value - mean;
                sumM2 += delta * delta2;
                meanProgressive.push(mean);
                varianceProgressive.push(sumM2 / n);
            });

            return { meanProgressive, varianceProgressive };
        }

        let distributionChart, meanChart, varianceChart;

        function updateCharts(sampleCount) {
            const samples = generateRandomSample(sampleCount);
            const empiricalProbabilities = distributionValues.map(value => samples.filter(v => v === value).length / sampleCount);

            const chartOptions = {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { title: { display: true, text: 'Values' } },
                    y: { title: { display: true, text: 'Probability' }, beginAtZero: true }
                },
                plugins: {
                    legend: { position: 'top' }
                }
            };

            if (distributionChart) distributionChart.destroy();
            distributionChart = new Chart(document.getElementById('distributionChart').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: distributionValues,
                    datasets: [
                        { label: 'Theoretical Probabilities', data: theoreticalProbabilities, backgroundColor: '#4CAF50', borderWidth: 1 },
                        { label: 'Empirical Probabilities', data: empiricalProbabilities, backgroundColor: '#FF5722', borderWidth: 1 }
                    ]
                },
                options: { ...chartOptions }
            });

            const { meanProgressive, varianceProgressive } = calculateMeanVariance(samples);
            const labels = Array.from({ length: sampleCount }, (_, i) => i + 1);

            if (meanChart) meanChart.destroy();
            meanChart = new Chart(document.getElementById('meanChart').getContext('2d'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Empirical Mean', data: meanProgressive, borderColor: '#FFC107', fill: false, pointRadius: 0 },
                        { label: 'Theoretical Mean', data: Array(sampleCount).fill(3), borderColor: '#03A9F4', borderDash: [5, 5], fill: false }
                    ]
                },
                options: { ...chartOptions }
            });

            if (varianceChart) varianceChart.destroy();
            varianceChart = new Chart(document.getElementById('varianceChart').getContext('2d'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Empirical Variance', data: varianceProgressive, borderColor: '#673AB7', fill: false, pointRadius: 0 },
                        { label: 'Theoretical Variance', data: Array(sampleCount).fill(1.2), borderColor: '#FFEB3B', borderDash: [5, 5], fill: false }
                    ]
                },
                options: { ...chartOptions }
            });
        }

        document.getElementById('generateBtn').addEventListener('click', () => {
            const sampleCount = parseInt(document.getElementById('sampleSize').value, 10);
            if (sampleCount > 0) updateCharts(sampleCount);
        });
    </script>
</body>
</html>
